<!DOCTYPE html>
<html lang="en">
<%- include('partials/head') %>
<body class="font-sans antialiased text-slate-800 bg-slate-50">
    <%- include('partials/auth-guard') %>
    <%- include('partials/navbar') %>

    <div class="pharmacy-header">
        <div class="absolute inset-0 opacity-40 pointer-events-none">
            <div class="absolute top-0 right-0 w-96 h-96 bg-teal-200 rounded-full blur-3xl mix-blend-multiply"></div>
            <div class="absolute bottom-0 left-0 w-96 h-96 bg-blue-200 rounded-full blur-3xl mix-blend-multiply"></div>
        </div>

        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center relative z-10">
            <div class="mb-4 md:mb-0 text-center md:text-left">
                <h1 class="text-3xl md:text-4xl font-bold header-title mb-2">Crowbar Pharmacy</h1>
                <p class="header-subtitle font-medium">Medicines & Wellness delivered in 2 hours.</p>
            </div>
            
            <div class="hidden md:block bg-white px-5 py-3 rounded-xl shadow-lg border border-slate-100">
                <div class="text-[10px] uppercase tracking-wide text-slate-400 font-bold mb-1">Delivering To</div>
                <div class="font-bold flex items-center gap-2 text-teal-700">
                    <svg class="w-5 h-5 text-teal-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    Home â€¢ Bangalore
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 py-8">
        
        <div class="category-container scrollbar-hide">
            <button class="category-btn active" onclick="filterProducts('all', this)">All Products</button>
            <button class="category-btn inactive" onclick="filterProducts('Wellness', this)">Wellness</button>
            <button class="category-btn inactive" onclick="filterProducts('Essentials', this)">Essentials</button>
            <button class="category-btn inactive" onclick="filterProducts('Devices', this)">Devices</button>
            <button class="category-btn inactive" onclick="filterProducts('Nutrition', this)">Nutrition</button>
        </div>

        <div class="product-grid">
            
           

            <% products.forEach(function(product) { %>
                <div class="product-card" data-category="<%= product.category %>" onclick="window.location.href='/coming-soon'" style="cursor: pointer;">
                    <div class="product-image-container">
                        <img src="<%= product.image %>" alt="<%= product.name %>" class="product-img">
                        <button class="quick-add-btn">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                        </button>
                    </div>
                    
                    <div class="product-info">
                        <div class="product-category"><%= product.category %></div>
                        <h3 class="product-title"><%= product.name %></h3>
                        <div class="product-footer">
                            <span class="product-price"><%= product.price %></span>
                            <button class="add-btn-small">ADD</button>
                        </div>
                    </div>
                </div>
            <% }); %>
        
        </div>
    </div>

    <%- include('partials/footer') %>

    <script>
        function filterProducts(category, btnElement) {
            // 1. Update Button Styles
            // Reset all buttons to inactive
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
                btn.classList.add('inactive');
            });
            // Set clicked button to active
            btnElement.classList.remove('inactive');
            btnElement.classList.add('active');

            // 2. Filter Cards
            const cards = document.querySelectorAll('.product-card');
            cards.forEach(card => {
                const cardCategory = card.getAttribute('data-category');
                
                // Show if 'all' is selected OR matches category
                if (category === 'all' || cardCategory === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>